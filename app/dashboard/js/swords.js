function showBtnDiv(){_("statustext").style.height="80px",_("btns_SP").style.display="block"}function doUpload(a){var b=_(a).files[0];if(""==b.name)return!1;if("image/jpeg"!=b.type&&"image/gif"!=b.type)return alert("That file type is not supported."),!1;_("triggerBtn_SP").style.display="none",_("uploadDisplay_SP").innerHTML="Image uploading......";var c=new FormData;c.append("stPic",b);var d=new XMLHttpRequest;d.addEventListener("load",completeHandler,!1),d.addEventListener("error",errorHandler,!1),d.addEventListener("abort",abortHandler,!1),d.open("POST","/v2/app/dashboard/photo_system.php"),d.send(c)}function completeHandler(a){var b=a.target.responseText,c=b.split("|");"upload_complete"==c[0]?(hasImage=c[1],_("uploadDisplay_SP").innerHTML='<img src="/v2/app/dashboard/tempUploads/'+c[1]+'" class="statusImage" />'):(_("uploadDisplay_SP").innerHTML=c[0],_("triggerBtn_SP").style.display="block")}function errorHandler(a){_("uploadDisplay_SP").innerHTML="Upload Failed",_("triggerBtn_SP").style.display="block"}function abortHandler(a){_("uploadDisplay_SP").innerHTML="Upload Aborted",_("triggerBtn_SP").style.display="block"}function similarity(a,b){var c=a,d=b;a.length<b.length&&(c=b,d=a);var e=c.length;return 0===e?1:(e-editDistance(c,d))/parseFloat(e)}function editDistance(a,b){a=a.toLowerCase(),b=b.toLowerCase();for(var c=new Array,d=0;d<=a.length;d++){for(var e=d,f=0;f<=b.length;f++)if(0==d)c[f]=f;else if(f>0){var g=c[f-1];a.charAt(d-1)!=b.charAt(f-1)&&(g=Math.min(Math.min(g,e),c[f])+1),c[f-1]=e,e=g}d>0&&(c[b.length]=e)}return c[b.length]}function postToStatus(a,b,c,d){for(var e=_(d).value,f=e.toLowerCase(),g=f,h=0;h<badwordarray.length;h++){var i=badwordarray[h],j=Math.round(1e4*similarity(g,i))/100;if(console.log(j),console.log(i),j>50)return swal("Your post was too similar to our swear words.","Your post, "+g+" was "+j+"% similar to our list of swear words. As a result, you cannot continue until you make your post less vulgar.","error"),!1}if(""==e&&""==hasImage)return swal("Looks like you haven't typed anything."," You can't post nothing. Go ahead and type something :)","error"),!1;var k="";""!=e&&(k=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />").replace(/\r/g,"<br />")),""==k&&""!=hasImage?(e="||na||",k='<img src="/v2/app/dashboard/permUploads/'+hasImage+'" />'):""!=k&&""!=hasImage?k+='<br /><img src="/v2/app/dashboard/permUploads/'+hasImage+'" />':hasImage="na",_("statusBtn").disabled=!0;var l=ajaxObj("POST","/v2/app/dashboard/status_system.php");l.onreadystatechange=function(){if(k.trim(),1==ajaxReturn(l)){var a=l.responseText.split("|");if("post_ok"==a[0]){var b=a[1],c=_("statusarea").innerHTML;_("statusarea").innerHTML='<div id="status_'+b+'" class="col-md-4"> <div class="card tile card-post"> <div class="card-heading"><?php echo $profile_pic ?><p class="author">Yourself</p> <p class="time">Just Now</p> </div> <div class="card-body"> '+k+' <ul class="post-action"> <li><a href="#">Share</a></li> <li><a id="sdb_'+b+'" href="#" onclick="return false;" onmousedown="deleteStatus(\''+b+"','status_"+b+'\');" title="DELETE THIS STATUS AND ITS REPLIES">Delete</a></li> </ul> </div> <div class="card-footer"> <ul class="card-comments" id="replies_'+b+'"></ul> <div class="input-group"> <div class="inputer"> <div class="input-wrapper"> <textarea id="replytext_'+b+'" class=" form-control maxlength maxlength-textarea" maxlength="250" rows="1" placeholder="Write a comment here"></textarea> </div> </div> <div class="input-group-btn"> <button id="replyBtn_'+b+'" onclick="replyToStatus('+b+",'<?php echo $u; ?>','replytext_"+b+'\',this)" type="button" class="btn btn-default">Send</button> </div> </div> </div> </div> </div>'+c,_("statusBtn").disabled=!1,_("triggerBtn_SP").style.display="block",_("triggerBtn_SP").innerHTML="<span class='ion-android-attach'></span>",_("btns_SP").style.display="none",_("uploadDisplay_SP").innerHTML="",_("fu_SP").value="",hasImage="",_(d).value="",location.reload()}else swal(l.responseText)}},l.send("action="+a+"&type="+b+"&user="+c+"&data="+e+"&image="+hasImage)}function replyToStatus(a,b,c,d){var e=_(c).value;if(""==e)return swal("Replies cannot be empty","Please enter something and try again!","error"),!1;for(var f=e.toLowerCase(),g=f,h=0;h<badwordarray.length;h++){var i=badwordarray[h],j=Math.round(1e4*similarity(g,i))/100;if(console.log(j),console.log(i),j>50)return swal("Your reply was too similar to our swear words.","Your post, "+g+" was "+j+"% similar to our list of swear words. As a result, you cannot continue until you make your post less vulgar.","error"),!1}_("replyBtn_"+a).disabled=!0;var k=ajaxObj("POST","/v2/app/dashboard/status_system.php");k.onreadystatechange=function(){if(1==ajaxReturn(k)){var b=k.responseText.split("|");if("reply_ok"==b[0]){var d=b[1];e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />").replace(/\r/g,"<br />"),_("replies_"+a).innerHTML+='<li id="reply_'+d+'" class="reply_boxes"><div class="user-photo"><?php echo $profile_pic ?></div><div class="comment">'+e+' <br /> <a id="srdb_'+d+'" href="#" onclick="return false;" onmousedown="deleteReply(\''+d+"','reply_"+d+'\');" title="DELETE THIS COMMENT">remove</a></div></li>',_("replyBtn_"+a).disabled=!1,_(c).value="",location.reload()}else alert(k.responseText)}},k.send("action=status_reply&sid="+a+"&user="+b+"&data="+e)}function deleteStatus(a,b){swal({title:"Are you sure?",text:"You will not be able to recover this post!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(c){if(1!=c)return!1;var d=ajaxObj("POST","/v2/app/dashboard/status_system.php");d.onreadystatechange=function(){1==ajaxReturn(d)&&("delete_ok"==d.responseText?(_(b).style.display="none",_("replytext_"+a).style.display="none",_("replyBtn_"+a).style.display="none"):SweetAlert(d.responseText))},d.send("action=delete_status&statusid="+a)})}function deleteReply(a,b){swal({title:"Are you sure?",text:"You will not be able to recover this reply!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(c){if(1!=c)return!1;var d=ajaxObj("POST","/v2/app/dashboard/status_system.php");d.onreadystatechange=function(){1==ajaxReturn(d)&&("delete_ok"==d.responseText?_(b).style.display="none":alert(d.responseText))},d.send("action=delete_reply&replyid="+a)})}function statusMax(a,b){a.value.length>b&&(alert(b+" maximum character limit reached"),a.value=a.value.substring(0,b))}function shareStatus(a){var b=ajaxObj("POST","/v2/app/dashboard/status_system.php");b.onreadystatechange=function(){1==ajaxReturn(b)&&("share_ok"==b.responseText?Pleasure.handleToastrSettings(!1,"toast-bottom-left",!1,"info",!0,"","Post successsfully shared!"):alert(b.responseText))},b.send("action=share&id="+a)}var hasImage="",badwordarray=["bitch","fuck","asshole","ass","kill","die","nigger","faggot","aryan","bastard"];window.onbeforeunload=function(){if(""!=hasImage)return"You have not posted your image"};
